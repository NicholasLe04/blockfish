from bitboard_util import set_bit

INDEX_TO_POSITION = {
       63: 'h1', 62: 'h2', 61: 'h3', 60: 'h4', 59: 'h5', 58: 'h6', 57: 'h7', 56: 'h8',
       55: 'g1', 54: 'g2', 53: 'g3', 52: 'g4', 51: 'g5', 50: 'g6', 49: 'g7', 48: 'g8',
       47: 'f1', 46: 'f2', 45: 'f3', 44: 'f4', 43: 'f5', 42: 'f6', 41: 'f7', 40: 'f8',
       39: 'e1', 38: 'e2', 37: 'e3', 36: 'e4', 35: 'e5', 34: 'e6', 33: 'e7', 32: 'e8',
       31: 'd1', 30: 'd2', 29: 'd3', 28: 'd4', 27: 'd5', 26: 'd6', 25: 'd7', 24: 'd8',
       23: 'c1', 22: 'c2', 21: 'c3', 20: 'c4', 19: 'c5', 18: 'c6', 17: 'c7', 16: 'c8',
       15: 'b1', 14: 'b2', 13: 'b3', 12: 'b4', 11: 'b5', 10: 'b6', 9:  'b7', 8:  'b8',
       7:  'a1', 6: ' a2', 5:  'a3', 4:  'a4', 3:  'a5', 2:  'a6', 1:  'a7', 0:  'a8'
   }

POSITION_TO_INDEX  = {
        'h1': 63, 'h2': 62, 'h3': 61, 'h4': 60, 'h5': 59, 'h6': 58, 'h7': 57, 'h8': 56,
        'g1': 55, 'g2': 54, 'g3': 53, 'g4': 52, 'g5': 51, 'g6': 50, 'g7': 49, 'g8': 48,
        'f1': 47, 'f2': 46, 'f3': 45, 'f4': 44, 'f5': 43, 'f6': 42, 'f7': 41, 'f8': 40,
        'e1': 39, 'e2': 38, 'e3': 37, 'e4': 36, 'e5': 35, 'e6': 34, 'e7': 33, 'e8': 32,
        'd1': 31, 'd2': 30, 'd3': 29, 'd4': 28, 'd5': 27, 'd6': 26, 'd7': 25, 'd8': 24,
        'c1': 23, 'c2': 22, 'c3': 21, 'c4': 20, 'c5': 19, 'c6': 18, 'c7': 17, 'c8': 16,
        'b1': 15, 'b2': 14, 'b3': 13, 'b4': 12, 'b5': 11, 'b6': 10, 'b7': 9 , 'b8': 8 ,
        'a1': 7,  'a2': 6 , 'a3': 5 , 'a4': 4 , 'a5': 3 , 'a6': 2 , 'a7': 1 , 'a8': 0 
   }

EXCLUDE_A_FILE = int("01111111_01111111_01111111_01111111_01111111_01111111_01111111_01111111", 2)
EXCLUDE_H_FILE = int("11111110_11111110_11111110_11111110_11111110_11111110_11111110_11111110", 2)

RANK_4 = int("00000000_00000000_00000000_00000000_11111111_00000000_00000000_00000000", 2)
RANK_5 = int("00000000_00000000_00000000_11111111_00000000_00000000_00000000_00000000", 2)

W_KING_CASTLE_CLEAR =  int("00000000_00000000_00000000_00000000_00000000_00000000_00000000_00000110", 2)
W_QUEEN_CASTLE_CLEAR = int("00000000_00000000_00000000_00000000_00000000_00000000_00000000_01110000", 2)
B_KING_CASTLE_CLEAR =  int("00000110_00000000_00000000_00000000_00000000_00000000_00000000_00000000", 2)
B_QUEEN_CASTLE_CLEAR = int("01110000_00000000_00000000_00000000_00000000_00000000_00000000_00000000", 2)

KNIGHT_ATTACKS = {}

PIECE_VALUES = { 
                'P': 1, 
                'N': 3.05,
                'B': 3.33, 
                'R': 5.63, 
                'Q': 9.5, 
                'K': 0, 
                } # Per AlphaZero

for start_index in range(64):
    KNIGHT_ATTACKS[start_index] = int("00000000_00000000_00000000_00000000_00000000_00000000_00000000_00000000", 2)
    for dir in [17, 15, 10, 6, -6, -10, -15, -17]:
        if 0 <= start_index + dir < 64 and (-2 <= (start_index+dir)//8 - start_index//8 <= 2) and (-2 <= (start_index+dir)%8 - start_index%8 <= 2):
            KNIGHT_ATTACKS[start_index] = set_bit(KNIGHT_ATTACKS[start_index], start_index + dir)